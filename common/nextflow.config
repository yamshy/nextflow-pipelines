// Shared defaults for Control API managed runs
wave {
    enabled = System.getenv('NXF_WAVE_ENABLED')?.toBoolean() ?: false
}

fusion {
    enabled = System.getenv('NXF_ENABLE_FUSION')?.toBoolean() ?: false
}

workDir = System.getenv('WORK_BUCKET') && System.getenv('RUN_ID')
    ? "${System.getenv('WORK_BUCKET')}/runs/${System.getenv('RUN_ID')}"
    : "${baseDir}/work"

profiles {
    k8s {
        process {
            executor = 'k8s'
            cpus = 1
            memory = '2 GB'
            time = '1h'
        }
        kubernetes {
            namespace = 'nextflow-demo'
            serviceAccount = 'nextflow-runner'
        }
    }
}
